(()=>{"use strict";class e{constructor(){this.onToggle=()=>{const e=this.menu.classList.toggle("is-open");this.toggle.classList.toggle("is-open",e),this.toggle.setAttribute("aria-expanded",String(e))},this.closeMenu=()=>{this.menu.classList.remove("is-open"),this.toggle.classList.remove("is-open"),this.toggle.setAttribute("aria-expanded","false")},this.onDocumentClick=e=>{const t=e.target;this.menu.contains(t)||this.toggle.contains(t)||this.closeMenu()},this.onResize=()=>{window.innerWidth>768&&(this.menu.classList.remove("is-open"),this.toggle.classList.remove("is-open"),this.toggle.setAttribute("aria-expanded","false"))},this.toggle=document.getElementById("menuToggle"),this.menu=document.getElementById("menu"),this.links=this.menu.querySelectorAll("a"),this.toggle.addEventListener("click",this.onToggle),this.links.forEach(e=>e.addEventListener("click",this.closeMenu)),document.addEventListener("click",this.onDocumentClick),window.addEventListener("resize",this.onResize)}}class t{constructor(){this.close=()=>{this.overlay.classList.remove("is-open"),this.overlay.setAttribute("aria-hidden","true")},this.onOverlayClick=e=>{e.target===this.overlay&&this.close()},this.onKeyDown=e=>{"Escape"===e.key&&this.close()},this.overlay=document.getElementById("modalOverlay"),this.modal=this.overlay.querySelector(".modal"),this.title=document.getElementById("modalTitle"),this.message=document.getElementById("modalMessage"),this.closeBtn=document.getElementById("modalCloseBtn"),this.closeBtn.addEventListener("click",this.close),this.overlay.addEventListener("click",this.onOverlayClick),document.addEventListener("keydown",this.onKeyDown)}open(e){"success"===e&&(this.modal.className="modal success",this.title.textContent="Message envoyé !",this.message.innerHTML="\n        Merci pour votre message.<br>\n        Je vous répondrai dans les plus brefs délais.\n      "),"error"===e&&(this.modal.className="modal error",this.title.textContent="Une erreur est survenue",this.message.textContent="Votre message n’a pas pu être envoyé. Veuillez réessayer plus tard."),this.overlay.classList.add("is-open"),this.overlay.setAttribute("aria-hidden","false")}}var s=function(e,t,s,i){return new(s||(s=Promise))(function(n,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(r,a)}l((i=i.apply(e,t||[])).next())})};class i{constructor(e){this.root=e,this.index=0,this.startX=0,this.startY=0,this.isSwiping=!1,this.swipeThreshold=50,this.horizontalSwipeThreshold=20,this.onTouchStart=e=>{const t=e.touches[0];this.startX=t.clientX,this.startY=t.clientY,this.isSwiping=!0},this.onTouchEnd=e=>{if(!this.isSwiping)return;this.isSwiping=!1;const t=e.changedTouches[0],s=t.clientX-this.startX,i=t.clientY-this.startY;Math.abs(i)+this.horizontalSwipeThreshold>Math.abs(s)||Math.abs(s)<this.swipeThreshold||(s<0?this.next():this.previous())},this.track=e.querySelector(".carousel-track"),this.prevBtn=e.querySelector(".carousel-prev"),this.nextBtn=e.querySelector(".carousel-next"),this.nav=e.querySelector(".carousel-nav"),this.dots=e.querySelectorAll(".carousel-dot"),this.bindEvents(),this.update()}get cardsVisible(){const e=getComputedStyle(this.root).getPropertyValue("--cards-visible");return Number(e)||1}get maxIndex(){return Math.max(0,this.track.children.length-this.cardsVisible)}get allCardsVisible(){return this.cardsVisible>=this.track.children.length}bindEvents(){this.nextBtn.addEventListener("click",()=>{this.next()}),this.prevBtn.addEventListener("click",()=>{this.previous()}),window.addEventListener("resize",()=>this.update()),this.track.addEventListener("touchstart",this.onTouchStart,{passive:!0}),this.track.addEventListener("touchend",this.onTouchEnd),this.dots.forEach((e,t)=>{e.addEventListener("click",()=>{this.goTo(t)})})}update(){const e=this.track.children[0];if(!e)return;const t=e.offsetWidth,s=getComputedStyle(this.track),i=parseFloat(s.columnGap||s.gap||"0"),n=this.index*(t+i);this.track.style.transform=`translateX(-${n}px)`,this.updateNavigation()}next(){this.index=Math.min(this.index+1,this.maxIndex),this.update()}previous(){this.index=Math.max(this.index-1,0),this.update()}goTo(e){this.index=Math.max(0,Math.min(e,this.maxIndex)),this.update()}updateNavigation(){this.allCardsVisible?this.nav.style.display="none":(this.nav.style.display="",0===this.index?this.prevBtn.classList.add("hidden"):this.prevBtn.classList.remove("hidden"),this.index>=this.maxIndex?this.nextBtn.classList.add("hidden"):this.nextBtn.classList.remove("hidden"),this.dots.forEach((e,t)=>{t===this.index?(e.classList.add("active"),e.setAttribute("aria-selected","true")):(e.classList.remove("active"),e.setAttribute("aria-selected","false"))}))}onResize(){this.index=0,this.track.style.transform="translateX(0px)",this.updateNavigation()}}const n="cookie-consent";let o,r;document.addEventListener("DOMContentLoaded",()=>{o=new e,r=new i(document.getElementById("prestationsCarousel")),function(){const e=document.querySelector("#appointmentForm");if(!e)return;const i=new t;e.addEventListener("submit",t=>s(this,void 0,void 0,function*(){t.preventDefault();try{yield function(e){return s(this,void 0,void 0,function*(){var t,s,i,n,o,r,a,l,d;const c=new FormData(e),h={firstname:String(null!==(t=c.get("firstname"))&&void 0!==t?t:""),lastname:String(null!==(s=c.get("lastname"))&&void 0!==s?s:""),mail:String(null!==(i=c.get("mail"))&&void 0!==i?i:""),message:String(null!==(n=c.get("message"))&&void 0!==n?n:""),energeticCare:String(null!==(o=c.get("energeticCareChbx"))&&void 0!==o?o:""),cardDrawing:String(null!==(r=c.get("cardDrawingChbx"))&&void 0!==r?r:""),numerology:String(null!==(a=c.get("numerologyChbx"))&&void 0!==a?a:""),remoteCare:String(null!==(l=c.get("remoteCareChbx"))&&void 0!==l?l:""),energy:String(null!==(d=c.get("energy"))&&void 0!==d?d:"")};if(!(yield fetch("http://localhost:8081/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok)throw new Error("Erreur lors de l’envoi du formulaire")})}(e),e.reset(),i.open("success")}catch(e){console.error(e),i.open("error")}}))}(),function(){const e=document.querySelector("#giftCardForm");if(!e)return;const i=new t;e.addEventListener("submit",t=>s(this,void 0,void 0,function*(){t.preventDefault();try{yield function(e){return s(this,void 0,void 0,function*(){var t,s,i,n,o,r;const a=new FormData(e),l={firstname:String(null!==(t=a.get("firstname"))&&void 0!==t?t:""),lastname:String(null!==(s=a.get("lastname"))&&void 0!==s?s:""),amount:String(null!==(i=a.get("amount"))&&void 0!==i?i:""),mail:String(null!==(n=a.get("mail"))&&void 0!==n?n:""),message:String(null!==(o=a.get("message"))&&void 0!==o?o:""),energy:String(null!==(r=a.get("energy"))&&void 0!==r?r:"")};if(!(yield fetch("http://localhost:8081/giftCard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw new Error("Erreur lors de l’envoi du formulaire")})}(e),e.reset(),i.open("success")}catch(e){console.error(e),i.open("error")}}))}(),function(){const e=document.getElementById("cookieBanner"),t=document.getElementById("cookieAccept"),s=document.getElementById("cookieDecline");e&&t&&s&&(localStorage.getItem(n)||setTimeout(()=>{e.classList.add("is-visible")},1e3),t.addEventListener("click",()=>{localStorage.setItem(n,"accepted"),e.classList.remove("is-visible"),function(){const e="G-V65PEN17GG",t=document.createElement("script");t.async=!0,t.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,document.head.appendChild(t);const s=document.createElement("script");s.innerHTML=`\n        window.dataLayer = window.dataLayer || [];\n        function gtag(){dataLayer.push(arguments);}\n        gtag('js', new Date());\n        gtag('config', '${e}');\n    `,document.head.appendChild(s)}()}),s.addEventListener("click",()=>{localStorage.setItem(n,"declined"),e.classList.remove("is-visible")}))}()}),window.addEventListener("resize",()=>{r.onResize()})})();