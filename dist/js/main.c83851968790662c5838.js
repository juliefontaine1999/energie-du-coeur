(()=>{"use strict";class t{constructor(){this.onToggle=()=>{const t=this.menu.classList.toggle("is-open");this.toggle.classList.toggle("is-open",t),this.toggle.setAttribute("aria-expanded",String(t))},this.closeMenu=()=>{this.menu.classList.remove("is-open"),this.toggle.classList.remove("is-open"),this.toggle.setAttribute("aria-expanded","false")},this.onDocumentClick=t=>{const e=t.target;this.menu.contains(e)||this.toggle.contains(e)||this.closeMenu()},this.onResize=()=>{window.innerWidth>768&&(this.menu.classList.remove("is-open"),this.toggle.classList.remove("is-open"),this.toggle.setAttribute("aria-expanded","false"))},this.toggle=document.getElementById("menuToggle"),this.menu=document.getElementById("menu"),this.links=this.menu.querySelectorAll("a"),this.toggle.addEventListener("click",this.onToggle),this.links.forEach(t=>t.addEventListener("click",this.closeMenu)),document.addEventListener("click",this.onDocumentClick),window.addEventListener("resize",this.onResize)}}class e{constructor(){this.close=()=>{this.overlay.classList.remove("is-open"),this.overlay.setAttribute("aria-hidden","true")},this.onOverlayClick=t=>{t.target===this.overlay&&this.close()},this.onKeyDown=t=>{"Escape"===t.key&&this.close()},this.overlay=document.getElementById("modalOverlay"),this.modal=this.overlay.querySelector(".modal"),this.title=document.getElementById("modalTitle"),this.message=document.getElementById("modalMessage"),this.closeBtn=document.getElementById("modalCloseBtn"),this.closeBtn.addEventListener("click",this.close),this.overlay.addEventListener("click",this.onOverlayClick),document.addEventListener("keydown",this.onKeyDown)}open(t){"success"===t&&(this.modal.className="modal success",this.title.textContent="Message envoyé !",this.message.innerHTML="\n        Merci pour votre message.<br>\n        Je vous répondrai dans les plus brefs délais.\n      "),"error"===t&&(this.modal.className="modal error",this.title.textContent="Une erreur est survenue",this.message.textContent="Votre message n’a pas pu être envoyé. Veuillez réessayer plus tard."),this.overlay.classList.add("is-open"),this.overlay.setAttribute("aria-hidden","false")}}var s=function(t,e,s,i){return new(s||(s=Promise))(function(n,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(r,a)}l((i=i.apply(t,e||[])).next())})};class i{constructor(t){this.root=t,this.index=0,this.startX=0,this.startY=0,this.isSwiping=!1,this.swipeThreshold=50,this.horizontalSwipeThreshold=20,this.onTouchStart=t=>{const e=t.touches[0];this.startX=e.clientX,this.startY=e.clientY,this.isSwiping=!0},this.onTouchEnd=t=>{if(!this.isSwiping)return;this.isSwiping=!1;const e=t.changedTouches[0],s=e.clientX-this.startX,i=e.clientY-this.startY;Math.abs(i)+this.horizontalSwipeThreshold>Math.abs(s)||Math.abs(s)<this.swipeThreshold||(s<0?this.next():this.previous())},this.track=t.querySelector(".carousel-track"),this.prevBtn=t.querySelector(".prev-button"),this.nextBtn=t.querySelector(".next-button"),this.bindEvents(),this.update()}get cardsVisible(){const t=getComputedStyle(this.root).getPropertyValue("--cards-visible");return Number(t)||1}get maxIndex(){return Math.max(0,this.track.children.length-this.cardsVisible)}bindEvents(){this.nextBtn.addEventListener("click",()=>{this.next()}),this.prevBtn.addEventListener("click",()=>{this.previous()}),window.addEventListener("resize",()=>this.update()),this.track.addEventListener("touchstart",this.onTouchStart,{passive:!0}),this.track.addEventListener("touchend",this.onTouchEnd)}update(){const t=this.track.children[0];if(!t)return;const e=t.offsetWidth,s=getComputedStyle(this.track),i=parseFloat(s.columnGap||s.gap||"0"),n=this.index*(e+i);this.track.style.transform=`translateX(-${n}px)`,this.updateArrows()}next(){this.index=Math.min(this.index+1,this.maxIndex),this.update()}previous(){this.index=Math.max(this.index-1,0),this.update()}updateArrows(){this.cardsVisible<4?(this.prevBtn.classList.remove("hidden"),this.nextBtn.classList.remove("hidden"),0===this.index?this.prevBtn.classList.add("hidden"):this.index===this.maxIndex&&this.nextBtn.classList.add("hidden")):(this.prevBtn.classList.add("hidden"),this.nextBtn.classList.add("hidden"))}onResize(){this.index=0,this.track.style.transform="translateX(0px)",this.updateArrows()}}let n,o;document.addEventListener("DOMContentLoaded",()=>{n=new t,o=new i(document.getElementById("prestationsCarousel")),function(){const t=document.querySelector("#appointmentForm");if(!t)return;const i=new e;t.addEventListener("submit",e=>s(this,void 0,void 0,function*(){e.preventDefault();try{yield function(t){return s(this,void 0,void 0,function*(){var e,s,i,n,o,r,a,l,d;const h=new FormData(t),c={firstname:String(null!==(e=h.get("firstname"))&&void 0!==e?e:""),lastname:String(null!==(s=h.get("lastname"))&&void 0!==s?s:""),mail:String(null!==(i=h.get("mail"))&&void 0!==i?i:""),message:String(null!==(n=h.get("message"))&&void 0!==n?n:""),energeticCare:String(null!==(o=h.get("energeticCareChbx"))&&void 0!==o?o:""),cardDrawing:String(null!==(r=h.get("cardDrawingChbx"))&&void 0!==r?r:""),numerology:String(null!==(a=h.get("numerologyChbx"))&&void 0!==a?a:""),remoteCare:String(null!==(l=h.get("remoteCareChbx"))&&void 0!==l?l:""),energy:String(null!==(d=h.get("energy"))&&void 0!==d?d:"")};if(!(yield fetch("http://localhost:8081/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok)throw new Error("Erreur lors de l’envoi du formulaire")})}(t),t.reset(),i.open("success")}catch(t){console.error(t),i.open("error")}}))}(),function(){const t=document.querySelector("#giftCardForm");if(!t)return;const i=new e;t.addEventListener("submit",e=>s(this,void 0,void 0,function*(){e.preventDefault();try{yield function(t){return s(this,void 0,void 0,function*(){var e,s,i,n,o;const r=new FormData(t),a={firstname:String(null!==(e=r.get("firstname"))&&void 0!==e?e:""),lastname:String(null!==(s=r.get("lastname"))&&void 0!==s?s:""),amount:String(null!==(i=r.get("amount"))&&void 0!==i?i:""),mail:String(null!==(n=r.get("mail"))&&void 0!==n?n:""),message:String(null!==(o=r.get("message"))&&void 0!==o?o:"")};if(!(yield fetch("http://localhost:8081/giftCard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Erreur lors de l’envoi du formulaire")})}(t),t.reset(),i.open("success")}catch(t){console.error(t),i.open("error")}}))}()}),window.addEventListener("resize",()=>{o.onResize()})})();