(()=>{"use strict";class t{constructor(){this.onToggle=()=>{const t=this.menu.classList.toggle("is-open");this.toggle.classList.toggle("is-open",t),this.toggle.setAttribute("aria-expanded",String(t))},this.closeMenu=()=>{this.menu.classList.remove("is-open"),this.toggle.classList.remove("is-open"),this.toggle.setAttribute("aria-expanded","false")},this.onDocumentClick=t=>{const e=t.target;this.menu.contains(e)||this.toggle.contains(e)||this.closeMenu()},this.onResize=()=>{window.innerWidth>768&&(this.menu.classList.remove("is-open"),this.toggle.classList.remove("is-open"),this.toggle.setAttribute("aria-expanded","false"))},this.toggle=document.getElementById("menuToggle"),this.menu=document.getElementById("menu"),this.links=this.menu.querySelectorAll("a"),this.toggle.addEventListener("click",this.onToggle),this.links.forEach(t=>t.addEventListener("click",this.closeMenu)),document.addEventListener("click",this.onDocumentClick),window.addEventListener("resize",this.onResize)}}class e{constructor(){this.close=()=>{this.overlay.classList.remove("is-open"),this.overlay.setAttribute("aria-hidden","true")},this.onOverlayClick=t=>{t.target===this.overlay&&this.close()},this.onKeyDown=t=>{"Escape"===t.key&&this.close()},this.overlay=document.getElementById("modalOverlay"),this.modal=this.overlay.querySelector(".modal"),this.title=document.getElementById("modalTitle"),this.message=document.getElementById("modalMessage"),this.closeBtn=document.getElementById("modalCloseBtn"),this.closeBtn.addEventListener("click",this.close),this.overlay.addEventListener("click",this.onOverlayClick),document.addEventListener("keydown",this.onKeyDown)}open(t){"success"===t&&(this.modal.className="modal success",this.title.textContent="Message envoyé !",this.message.innerHTML="\n        Merci pour votre message.<br>\n        Je vous répondrai dans les plus brefs délais.\n      "),"error"===t&&(this.modal.className="modal error",this.title.textContent="Une erreur est survenue",this.message.textContent="Votre message n’a pas pu être envoyé. Veuillez réessayer plus tard."),this.overlay.classList.add("is-open"),this.overlay.setAttribute("aria-hidden","false")}}var s=function(t,e,s,i){return new(s||(s=Promise))(function(n,o){function a(t){try{l(i.next(t))}catch(t){o(t)}}function r(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e)})).then(a,r)}l((i=i.apply(t,e||[])).next())})};class i{constructor(t){this.root=t,this.dots=[],this.index=0,this.previousCardsVisible=1,this.startX=0,this.startY=0,this.isSwiping=!1,this.swipeThreshold=50,this.horizontalSwipeThreshold=30,this.onTouchStart=t=>{const e=t.touches[0];this.startX=e.clientX,this.startY=e.clientY,this.isSwiping=!0},this.onTouchEnd=t=>{if(!this.isSwiping)return;this.isSwiping=!1;const e=t.changedTouches[0],s=e.clientX-this.startX,i=e.clientY-this.startY;Math.abs(i)+this.horizontalSwipeThreshold>Math.abs(s)||Math.abs(s)<this.swipeThreshold||(s<0?this.next():this.previous())},this.track=t.querySelector(".carousel-track"),this.prevBtn=t.querySelector(".carousel-prev"),this.nextBtn=t.querySelector(".carousel-next"),this.nav=t.querySelector(".carousel-nav"),this.dotsContainer=t.querySelector(".carousel-dots"),this.previousCardsVisible=this.cardsVisible,this.bindEvents(),this.createDots(),this.update()}get cardsVisible(){const t=getComputedStyle(this.root).getPropertyValue("--cards-visible");return Number(t)||1}get totalCards(){return this.track.children.length}get maxIndex(){return Math.max(0,this.totalCards-this.cardsVisible)}get allCardsVisible(){return this.cardsVisible>=this.totalCards}bindEvents(){this.nextBtn.addEventListener("click",()=>{this.next()}),this.prevBtn.addEventListener("click",()=>{this.previous()}),window.addEventListener("resize",()=>{this.handleResize()}),this.track.addEventListener("touchstart",this.onTouchStart,{passive:!0}),this.track.addEventListener("touchend",this.onTouchEnd)}handleResize(){const t=this.cardsVisible;t!==this.previousCardsVisible&&(this.previousCardsVisible=t,this.index=0,this.track.style.transform="translateX(0px)",this.createDots()),this.update()}createDots(){this.dotsContainer.innerHTML="",this.dots=[];const t=this.maxIndex+1;for(let e=0;e<t;e++){const t=document.createElement("button");t.className="carousel-dot",t.setAttribute("role","tab"),t.setAttribute("aria-label",`Page ${e+1}`),t.setAttribute("aria-selected",e===this.index?"true":"false"),e===this.index&&t.classList.add("active"),t.addEventListener("click",()=>{this.goTo(e)}),this.dotsContainer.appendChild(t),this.dots.push(t)}}update(){const t=this.track.children[0];if(!t)return;const e=t.offsetWidth,s=getComputedStyle(this.track),i=parseFloat(s.columnGap||s.gap||"0"),n=this.index*(e+i);this.track.style.transform=`translateX(-${n}px)`,this.updateNavigation()}next(){this.index=Math.min(this.index+1,this.maxIndex),this.update()}previous(){this.index=Math.max(this.index-1,0),this.update()}goTo(t){this.index=Math.max(0,Math.min(t,this.maxIndex)),this.update()}updateNavigation(){this.allCardsVisible?this.nav.style.display="none":(this.nav.style.display="",0===this.index?this.prevBtn.classList.add("hidden"):this.prevBtn.classList.remove("hidden"),this.index>=this.maxIndex?this.nextBtn.classList.add("hidden"):this.nextBtn.classList.remove("hidden"),this.dots.forEach((t,e)=>{e===this.index?(t.classList.add("active"),t.setAttribute("aria-selected","true")):(t.classList.remove("active"),t.setAttribute("aria-selected","false"))}))}}const n="cookie-consent";let o;document.addEventListener("DOMContentLoaded",()=>{o=new t,new i(document.getElementById("prestationsCarousel")),function(){const t=document.querySelector("#appointmentForm");if(!t)return;const i=new e;t.addEventListener("submit",e=>s(this,void 0,void 0,function*(){e.preventDefault();try{yield function(t){return s(this,void 0,void 0,function*(){var e,s,i,n,o,a,r,l,d;const c=new FormData(t),h={firstname:String(null!==(e=c.get("firstname"))&&void 0!==e?e:""),lastname:String(null!==(s=c.get("lastname"))&&void 0!==s?s:""),mail:String(null!==(i=c.get("mail"))&&void 0!==i?i:""),message:String(null!==(n=c.get("message"))&&void 0!==n?n:""),energeticCare:String(null!==(o=c.get("energeticCareChbx"))&&void 0!==o?o:""),cardDrawing:String(null!==(a=c.get("cardDrawingChbx"))&&void 0!==a?a:""),numerology:String(null!==(r=c.get("numerologyChbx"))&&void 0!==r?r:""),remoteCare:String(null!==(l=c.get("remoteCareChbx"))&&void 0!==l?l:""),energy:String(null!==(d=c.get("energy"))&&void 0!==d?d:"")};if(!(yield fetch("http://localhost:8081/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok)throw new Error("Erreur lors de l’envoi du formulaire")})}(t),t.reset(),i.open("success")}catch(t){console.error(t),i.open("error")}}))}(),function(){const t=document.querySelector("#giftCardForm");if(!t)return;const i=new e;t.addEventListener("submit",e=>s(this,void 0,void 0,function*(){e.preventDefault();try{yield function(t){return s(this,void 0,void 0,function*(){var e,s,i,n,o,a;const r=new FormData(t),l={firstname:String(null!==(e=r.get("firstname"))&&void 0!==e?e:""),lastname:String(null!==(s=r.get("lastname"))&&void 0!==s?s:""),amount:String(null!==(i=r.get("amount"))&&void 0!==i?i:""),mail:String(null!==(n=r.get("mail"))&&void 0!==n?n:""),message:String(null!==(o=r.get("message"))&&void 0!==o?o:""),energy:String(null!==(a=r.get("energy"))&&void 0!==a?a:"")};if(!(yield fetch("http://localhost:8081/giftCard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw new Error("Erreur lors de l’envoi du formulaire")})}(t),t.reset(),i.open("success")}catch(t){console.error(t),i.open("error")}}))}(),function(){const t=document.getElementById("cookieBanner"),e=document.getElementById("cookieAccept"),s=document.getElementById("cookieDecline");t&&e&&s&&(localStorage.getItem(n)||setTimeout(()=>{t.classList.add("is-visible")},1e3),e.addEventListener("click",()=>{localStorage.setItem(n,"accepted"),t.classList.remove("is-visible"),function(){const t="G-V65PEN17GG",e=document.createElement("script");e.async=!0,e.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,document.head.appendChild(e);const s=document.createElement("script");s.innerHTML=`\n        window.dataLayer = window.dataLayer || [];\n        function gtag(){dataLayer.push(arguments);}\n        gtag('js', new Date());\n        gtag('config', '${t}');\n    `,document.head.appendChild(s)}()}),s.addEventListener("click",()=>{localStorage.setItem(n,"declined"),t.classList.remove("is-visible")}))}()})})();